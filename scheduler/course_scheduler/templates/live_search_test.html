{% load url from future %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Live Search Test</title>
	<meta name="viewport" content="width=device-width, intial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/scheduler.css">
	<!--<script>
	$('body').scrollspy({
		target: '.search-wrapper'
		offset: 20
		});
	</script>-->
	
	<script src="{{ STATIC_URL }}jquery-2.1.1.min.js"></script>
	<script src="{{ STATIC_URL }}js/bootstrap.min.js"></script>
	<script src="{{ STATIC_URL }}js/jquery.cookie.js"></script>
	
	<script>
	function crsfSafeMethod(method) {
		return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
	}


	var csrftoken = $.cookie('csrftoken');
	$.ajaxSetup({
		beforeSend: function(xhr, settings) {
			if (!crsfSafeMethod(settings.type) && !this.crossDomain) {
				xhr.setRequestHeader("X-CSRFToken", csrftoken);
			}
		}
	});
	</script>
	
	<script type="text/javascript">
	function searchSuccess(data, textState, jqXHR)
	{
		var html = new String(data);
		if (html.substring(0, html.indexOf('</span>')).indexOf($("#course_search").val()) >= 0)
		{
			$("#search_result").html(data);
		}
	}
	
	function search()
	{	
		if (new String($("#course_search").val()).length > 2)
			{
				$("#search_result").html('<div class="searching-panel">Searching . . .</div>');
				$.get("/scheduler/search/", { 'criterion' : $("#course_search").val() }, searchSuccess, 'html');
			}
	}
	</script>
</head>
<body>
<div id="search-wrapper" class="search-wrapper">
	<input type="text" id="course_search" class="form-control" placeholder="Search" type="search" onkeyup="search()"> 
	<div id="search_result" class="side-searchbar">
	</div>
	</div>
	<div class="container"> 
	<div class="row">
	<h1>Scheduler!</h1>
		 <div class="col-sm-10"> Here goes the schedule!</div> 
	</div>
	</div>
</body>
</html>