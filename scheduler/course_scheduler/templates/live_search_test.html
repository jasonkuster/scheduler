{% load url from future %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Live Search Test</title>
	<meta name="viewport" content="width=device-width, intial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/scheduler.css">
	<script>
	$('body').scrollspy({
		target: '.search-wrapper'
		offset: 20
		});
	</script>
	
	<script type="text/javascript">
	function searchSuccess(data, textState, jqXHR)
	{
		$("#search_result").html(data);
	}
	
	function handleSearchResultJson(data)
	{
		if (JSON.stringify(data.criterion) === JSON.stringify($("#course_search").val())
		{
			$.each(data.courses, displayResult);
		}
	}
	
	function displayResult(index, course)
	{
		$("result-wrapper").append(
		"<div class='well well-sm result-well panel panel-default'>" +
			"<div class='panel-body no-vertical-padding'>" +
			"<div class='col-sm-8'>" +
				"<div class='row'>" +
				JSON.stringify(course.meeting.meeting_class.dept) + JSON.stringify(result.meeting.meeting_class.class_number) +
				"</div> <div class='row'>"
				JSON.stringify(course.meeting.recur_type) + JSON.stringify(result.meeting.start_time) + "-" + JSON.stringify(result.meeting.end_time) +
				"</div></div><div class='col-sm-4'>" +
				"<div class='row'>" +
				"<button type='button' class='btn btn-danger btn-xs'>Add</button>" +
				"<button type='button' class='btn btn-info btn-xs'>Info</button>" +
				"</div></div></div></div>");
	}
	
	function search()
	{
		$.getJson("/scheduler/search/", { 'criterion' : $("#course_search").val() }, searchSuccess, 'html');
	}
	</script>
</head>
<body>
<div id="search-wrapper" class="search-wrapper">
	<input type="text" id="course_search" class="form-control" placeholder="Search" type="search" onkeyup="search()"> 
	<div class="side-searchbar">
			<div class="result-wrapper"/>
			<div class="row" id="search_result"></div>
	</div>
	</div>
	<div class="container"> 
	<div class="row">
	<h1>Scheduler!</h1>
		 <div class="col-sm-10"> Here goes the schedule!</div> 
	</div>
	</div>
	<script src="http://code.jquery.com/jquery.min.js"></script>
	<script src="{{ STATIC_URL }}js/bootstrap.min.js"></script>


</body>
</html>